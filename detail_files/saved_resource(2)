!function(t,a,r){if("object"!=typeof window[t])return;if("string"!=typeof a)return;var o=window[t];const i="firstlog";if(a=o.convertStringToObject(a),o.validateObjectType(a.peachId,"string"))if("optout"!=a.peachId){o.setPeachId(a.peachId);var n=function(){try{if(o.logging("exec loadFunctionScript"),-1!=o.constant.UNSUPPORTED_BROWSER.indexOf(o.getBrowser()))return void o.logging("function tag not compatible browser");o.validateObjectType(o.getConfig().siteInfo.functionAbtest,"boolean")&&o.getConfig().siteInfo.functionAbtest&&o.load(o.getDomain()+"/function/kaizen-core/?color="+o.getColor(),!0),(o.validateObjectType(o.getConfig().siteInfo.functionPopupNps,"boolean")&&o.getConfig().siteInfo.functionPopupNps||o.validateObjectType(o.getConfig().siteInfo.functionPopupAd,"boolean")&&o.getConfig().siteInfo.functionPopupAd)&&o.load(o.getDomain()+"/function/popup-core/?color="+o.getColor(),!0)}catch(e){o.errorReport(e,i),o.funcTagDisabled(),e=e instanceof Error?e:"loadFunctionScript :: "+e,o.logging(e)}},g=function(){try{o.logging("exec loadCollaborationScript"),(o.validateObjectType(o.getConfig().siteInfo.collaborationI,"boolean")&&o.getConfig().siteInfo.collaborationI||o.validateObjectType(o.getConfig().siteInfo.collaborationC,"boolean")&&o.getConfig().siteInfo.collaborationC||o.validateObjectType(o.getConfig().siteInfo.collaborationT,"boolean")&&o.getConfig().siteInfo.collaborationT||o.validateObjectType(o.getConfig().siteInfo.collaborationTg,"boolean")&&o.getConfig().siteInfo.collaborationTg||o.validateObjectType(o.getConfig().siteInfo.collaborationO2,"boolean")&&o.getConfig().siteInfo.collaborationO2||o.validateObjectType(o.getConfig().siteInfo.collaborationAS,"boolean")&&o.getConfig().siteInfo.collaborationAS||o.validateObjectType(o.getConfig().siteInfo.collaborationVri,"boolean")&&o.getConfig().siteInfo.collaborationVri||o.validateObjectType(o.getConfig().siteInfo.collaborationPbs,"boolean")&&o.getConfig().siteInfo.collaborationPbs)&&o.load(o.getDomain()+"/collabo?color="+o.getColor(),!0)}catch(e){o.errorReport(e,i),o.funcTagDisabled(),e=e instanceof Error?e:"loadCollaborationScript :: "+e,o.logging(e)}},c=function(){try{if(o.logging("exec loadParallelScript"),-1!=o.constant.UNSUPPORTED_BROWSER.indexOf(o.getBrowser()))return void o.logging("function tag not compatible browser");var e=0;e=o.getDevice()==o.constant.DEVICE_TYPE_PC||o.getDevice()==o.constant.DEVICE_TYPE_TABLET?1:e,e=o.getDevice()==o.constant.DEVICE_TYPE_SMARTPHONE?3:e,o.loadAsync(o.getDomain()+"/parallel/?color="+o.getColor()+"&url="+encodeURIComponent(o.getUrl())+"&deviceType="+e+"&sesid="+o.getSessionId(),!0)}catch(e){o.errorReport(e,i),o.funcTagDisabled(),e=e instanceof Error?e:"loadFunctionScript :: "+e,o.logging(e)}};o.execute((function(){try{if(o.logging("exec sendLogByTreasureData"),0==o.getReady())throw new Error("$property.ready is false");if(""==o.getEndpoint())throw new Error("$property.endpoint is empty");if(""==o.getProtocol())throw new Error("$property.protocol is empty");if(!(o.validateObjectType(o.getConfig(),"object")&&o.validateObjectType(o.getConfig().siteInfo,"object")&&o.validateObjectType(o.getId(),"object")&&o.validateObjectType(o.getId().siteId,"string")&&o.validateObjectType(o.getId().color,"string")))throw new Error("Invalid is $config");o.setSiteId(o.getId().siteId),o.setColor(o.getId().color);var t=o.factoryTresureDataSdkInstance({host:o.getTdData().host,database:o.getTdData().database,writeKey:o.getTdData().apikey});t.setSignedMode();var a={fetchGlobalId:{},fetchJuicerId:{},sendLog:{}};a.fetchGlobalId={success:function(e){try{o.logging("complete td global id, next is get juicer id"),o.setTdGlobalId(e),o.setTdClientId(o.getCookie(o.constant.COOKIE_KEY_TD_CLIENT_ID));var t=o.getDomain()+"/activity/?color="+o.getColor()+"&jid="+o.getJuicerId()+"&uid="+o.getUserId()+"&sesid="+o.getSessionId()+"&tdGlobalId="+o.getTdGlobalId()+"&tdClientId="+o.getTdClientId()+"&peachId="+o.getPeachId()+"&siteId="+o.getSiteId()+"&title="+encodeURIComponent(o.getTitle())+"&url="+encodeURIComponent(o.getUrl())+"&userAgent="+encodeURIComponent(o.getUserAgent())+"&accessSource="+encodeURIComponent(o.getSessionReferrer())+"&imUid="+o.getImuid()+"&enabledTpc=1";o.execGetRequest(t,(function(e){try{if(o.logging("execute juicer id request"),"200"!=e.status&&""==e.text)throw new Error("invalid response data");if(e=o.convertStringToObject(e.text),!o.validateObjectType(e.usercard,"object"))throw new Error("failed get usercard");if(!o.validateObjectType(e.interestCategoryDefault,"object"))throw new Error("failed get interestCategoryDefault");if(!o.validateObjectType(e.interestCategoryO,"object"))throw new Error("failed get interestCategoryO");if(!o.validateObjectType(e.parameter,"object"))throw new Error("failed get parameter");if(!o.validateObjectType(e.usercard.jid,"string"))throw new Error("failed get juicer id");if(!o.validateObjectType(e.parameter.uid,"string"))throw new Error("failed get $parameter.uid");if(!o.validateObjectType(e.parameter.sesid,"string"))throw new Error("failed get $parameter.sesid");if(!o.validateObjectType(e.parameter.pageInActionId,"string"))throw new Error("failed get $parameter.pageInActionId");if(!o.validateObjectType(e.parameter.deviceType,"string"))throw new Error("failed get $parameter.deviceType");if(!o.validateObjectType(e.parameter.ip,"string"))throw new Error("failed get $parameter.ip");if(!o.validateObjectType(e.parameter.ipUaMixIdByMd5,"string"))throw new Error("failed get $parameter.ipUaMixIdByMd5");if(!o.validateObjectType(e.parameter.ipUaMixIdBySha256,"string"))throw new Error("failed get $parameter.ipUaMixIdBySha256");if(!o.validateObjectType(e.parameter.peachId,"string"))throw new Error("failed get $parameter.peachId");if("optout"==e.parameter.peachId)throw 1==o.getStorageType()&&o.setCookie(o.constant.COOKIE_KEY_PEACH_ID,"optout",o.getHost(),"/",o.constant.COOKIE_LIFETIME_OPTOUT,""),2==o.getStorageType()&&o.setLocalStorage(o.constant.COOKIE_KEY_PEACH_ID,"optout"),new Error("Tracking is disabled");1==o.getStorageType()&&o.setCookie(o.constant.COOKIE_KEY_JUICER_ID,e.usercard.jid,o.getHost(),"/",o.constant.COOKIE_LIFETIME_DEFAULT,""),2==o.getStorageType()&&o.setLocalStorage(o.constant.COOKIE_KEY_JUICER_ID,e.usercard.jid),1==o.getStorageType()&&o.setCookie(o.constant.COOKIE_KEY_USER_ID,e.parameter.uid,o.getHost(),"/",o.constant.COOKIE_LIFETIME_DEFAULT,""),2==o.getStorageType()&&o.setLocalStorage(o.constant.COOKIE_KEY_USER_ID,e.parameter.uid),o.setCookie(o.constant.COOKIE_KEY_SESSION_ID,e.parameter.sesid,o.getHost(),"/",o.constant.COOKIE_LIFETIME_SESSION,""),""==o.getPeachId()&&""!=e.parameter.peachId&&o.setPeachId(e.parameter.peachId),o.setJuicerId(e.usercard.jid),o.setUserId(e.parameter.uid),o.setSessionId(e.parameter.sesid),o.setPageInActionId(e.parameter.pageInActionId),o.setIpUaMixIdByMd5(e.parameter.ipUaMixIdByMd5),o.setIpUaMixIdBySha256(e.parameter.ipUaMixIdBySha256),o.setUserCard(e.usercard),o.setInterestCategoryDefault(e.interestCategoryDefault),o.setInterestCategoryO(e.interestCategoryO),o.setSessionReferrer(e.parameter.sesid),o.setDevice(e.parameter.deviceType),o.setIp(e.parameter.ip),o.validateObjectType(o.getUserCard().prefJName,"string")&&o.setArea(o.getUserCard().prefJName),t=o.getDomain()+"/activity/set/?color="+o.getColor()+"&peachId="+encodeURIComponent(o.getPeachId()),t+="&timestamp="+o.getTime(),o.loadAsync(t,!0),a.fetchJuicerId.success()}catch(e){o.errorReport(e,i),o.funcTagDisabled(),e=e instanceof Error?e:"fetchGlobalIdCallback :: sendLogByTreasureData :: "+e,o.logging(e)}}))}catch(e){o.errorReport(e,i),o.funcTagDisabled(),e=e instanceof Error?e:"fetchGlobalIdCallback :: Failed init juicer id request :: "+e,o.logging(e)}},error:function(t){o.errorReport(e,i),o.funcTagDisabled(),o.logging("Failed fetch global id")}},a.fetchJuicerId={success:function(){try{var e={access_source:o.getSessionReferrer(),acid:"",age:o.validateObjectType(o.getUserCard().age,"number")&&0!=o.getUserCard().age?o.getUserCard().age:"",area:o.validateObjectType(o.getUserCard().placePref,"string")&&""!=o.getUserCard().placePref?o.getUserCard().placePref:"",cef:o.validateObjectType(o.getCookieStatus(),"object")&&o.validateObjectType(o.getCookieStatus().cookieWriteEnabled,"number")&&1==o.getCookieStatus().cookieWriteEnabled?1:0,client_status:"",etag:"",ip_api_type:o.validateObjectType(o.getUserCard().ipApiType,"number")&&0!=o.getUserCard().ipApiType?o.getUserCard().ipApiType:"",ipua_mix_id_md5:o.getIpUaMixIdByMd5(),ipua_mix_id_sha256:o.getIpUaMixIdBySha256(),jduf:"",jid:o.getJuicerId(),link:"",ml_type:o.validateObjectType(o.getUserCard().mlType,"number")&&0!=o.getUserCard().mlType?o.getUserCard().mlType:"",lbc_ip:o.validateObjectType(o.getUserCard().lbcIp,"string")&&""!=o.getUserCard().lbcIp?o.getUserCard().lbcIp:"",org_name:o.validateObjectType(o.getUserCard().orgNameNormalize,"string")&&""!=o.getUserCard().orgNameNormalize?o.getUserCard().orgNameNormalize:"",org_name_original:o.validateObjectType(o.getUserCard().orgName,"string")&&""!=o.getUserCard().orgName?o.getUserCard().orgName:"",peach_id:o.getPeachId(),place_city:o.validateObjectType(o.getUserCard().placeCity,"string")&&""!=o.getUserCard().placeCity?o.getUserCard().placeCity:"",place_city_id:o.validateObjectType(o.getUserCard().placeCityId,"string")||o.validateObjectType(o.getUserCard().placeCityId,"number")?o.getUserCard().placeCityId:"",place_pref:o.validateObjectType(o.getUserCard().placePref,"string")&&""!=o.getUserCard().placePref?o.getUserCard().placePref:"",place_pref_id:o.validateObjectType(o.getUserCard().placePrefId,"string")||o.validateObjectType(o.getUserCard().placePrefId,"number")?o.getUserCard().placePrefId:"",piaid:o.getPageInActionId(),pid:"",scid:"",sesid:o.getSessionId(),sex:o.validateObjectType(o.getUserCard().sex,"number")&&o.validateObjectType(o.constant.SEX_TYPE_DATA[o.getUserCard().sex],"string")?o.getUserCard().sex:"",sid:o.getSiteId(),storage_type:o.getStorageType(),temperature:"",testid:"",uid:o.getUserId(),url:encodeURIComponent(o.getUrl()),vts:"",weather:"",im_uid:o.getImuid(),carrot_id:"",log_type:"",action_type:""},a={id:"",pageInfoId:""};o.validateObjectType(o.getConfig().abtestInfo,"object")&&(o.validateObjectType(o.getConfig().abtestInfo.id,"number")||o.validateObjectType(o.getConfig().abtestInfo.id,"string"))&&(a.id=o.getConfig().abtestInfo.id),o.validateObjectType(o.getConfig().abtestInfo,"object")&&(o.validateObjectType(o.getConfig().abtestInfo.pageInfoId,"number")||o.validateObjectType(o.getConfig().abtestInfo.pageInfoId,"string"))&&(a.pageInfoId=o.getConfig().abtestInfo.pageInfoId),e.pid=a.pageInfoId,e.log_type=""!=a.id?"ab":"tran",e.action_type="view",t.set(o.constant.TD_TABLE_BASE_LOG,e),t.trackPageview(o.constant.TD_TABLE_BASE_LOG,(function(){o.logging("complete send log :: "+o.constant.TD_TABLE_BASE_LOG),n(),g(),c()}))}catch(e){o.errorReport(e,i),o.funcTagDisabled(),e=e instanceof Error?e:"fetchJuicerIdCallback :: Failed send log :: "+e,o.logging(e)}},error:function(){o.errorReport(e,i),o.funcTagDisabled(),o.logging("Failed fetch juicer id")}};var r=o.factoryTresureDataSdkInstance({host:o.getTdData().host,database:"dtb",writeKey:""});r.setSignedMode(),r.trackPageview("tbl",(function(){o.validateObjectType(t.fetchGlobalID,"function")&&t.fetchGlobalID(a.fetchGlobalId.success,a.fetchGlobalId.error,!0),o.validateObjectType(t.fetchGlobalID,"function")||a.fetchGlobalId.success("")}))}catch(e){o.errorReport(e,i),o.funcTagDisabled(),e=e instanceof Error?e:"fetchJuicerId :: "+e,o.logging(e)}return this}))}else o.logging("Tracking is disabled");else o.logging("not set $option.peachId")}("__kit__WTmSvBBdtO8=","{'peachId':'41435553-8916-40ab-a1e7-8e4c5d287b5a'}");