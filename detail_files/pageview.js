!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports._audiencedata_=t():e._audiencedata_=t()}(this,(function(){return function(){var e={996:function(e,t){!function(){"use strict";var e={};!function(){var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.imUlid=void 0;var n="0123456789ABCDEFGHJKMNPQRSTVWXYZ";t.imUlid=function(){for(var e,t=Date.now(),i="",o=10;o--;)i=n[e=t%32]+i,t=(t-e)/32;o=16;var r=new Uint8Array(o);("crypto"in window?crypto:msCrypto).getRandomValues(r);for(;o--;)i+=n[31&r[o]];return i}}();var n=t;for(var i in e)n[i]=e[i];e.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})}()}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var i={};return function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(i,{_audiencedata_:function(){return r}});var o=n(996),r=new(function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"scripts",void 0),t(this,"vid",void 0),t(this,"owner_id",void 0),t(this,"site_id",void 0),t(this,"url",void 0),t(this,"title",void 0),t(this,"meta",void 0),t(this,"VISITOR_COOKIE_NAME","_im_vid"),t(this,"BH_URL","https://b.im-apps.net/bh.json"),t(this,"PAGEVIEW_URL","https://audiencedata.im-apps.net/pageview"),t(this,"msToExpire",3456e7),this.url=document.URL,this.title=document.title,this.meta=function(){try{return document.getElementsByName("description")[0].content}catch(e){return""}}(),this.setCookieVid(),this.scripts=document.getElementsByTagName("script");for(var e={},i=this.scripts.length-1;i>=0;i--){var o=this.scripts[i].src;if(~o.indexOf("cdn.audiencedata.net/js/v2/pageview.js")){for(var r=o.substring(o.indexOf("?")+1).split("&"),s=0,a=r.length;s<a;s++){var c=r[s].split("=");e[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}break}}this.owner_id=e.owner_id||"test",this.site_id=e.site_id||"-",this.beaconProcess()}var i,r;return i=n,(r=[{key:"sendingBeacon",value:function(e,t){if(!("navigator"in window)||!("sendBeacon"in window.navigator)){var n=window.event&&window.event.type,i="unload"===n||"beforeunload"===n,o="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(o.open("POST",e,!i),o.withCredentials=!0,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),o.setRequestHeader("Accept","*/*"),"string"==typeof t)o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.responseType="text/plain";else if(t instanceof Blob&&t.type)o.setRequestHeader("Content-Type",t.type);else{var r="";Object.keys(t).forEach((function(e,n,i){r+=e+"="+encodeURIComponent(t[e])+"&",n===i.length-1&&(r=r.slice(0,-1))})),t=r}try{o.send(t)}catch(e){return!1}return!0}navigator.sendBeacon(e,new URLSearchParams(t))}},{key:"getCookie",value:function(e){for(var t=e.length+1,n=document.cookie.split("; "),i="",o=0;o<n.length;o++)if(n[o].substr(0,t)===e+"="){i=n[o].substr(t,n[o].length);break}return i}},{key:"setCookie",value:function(e,t,n,i){var o=new Date;o.setTime(o.getTime()+this.msToExpire),document.cookie=e+"="+n+(this.msToExpire?";expires="+o.toUTCString():"")+";path=/"+(t?";domain="+t:"")+(i?";secure;":";")}},{key:"setCookieVid",value:function(){var e=this.getCookie(this.VISITOR_COOKIE_NAME);if(e)this.vid=e;else{var t=(0,o.imUlid)();this.setCookie(this.VISITOR_COOKIE_NAME,"."+window.location.hostname,t,"https:"==window.location.protocol),this.vid=t}}},{key:"beaconProcess",value:function(){var e=this,t=new XMLHttpRequest,n=document.location.hostname;t.open("GET",this.BH_URL+"?d="+n,!0),t.timeout=1e4,t.onload=function(n){var i=JSON.parse(t.responseText),o=i.log?{vid:e.vid,meta:e.meta,title:e.title,url:e.url,bh:i.bh,site_id:e.site_id,owner_id:e.owner_id,ref:document.referrer}:{vid:e.vid,url:e.url,bh:i.bh,site_id:e.site_id,owner_id:e.owner_id,ref:document.referrer};e.sendingBeacon(e.PAGEVIEW_URL,o)},t.onerror=function(e){console.error(t.statusText)},t.ontimeout=function(e){console.error(t.statusText)},t.send(null)}}])&&e(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),n}())}(),i._audiencedata_}()}));